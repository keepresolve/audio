webpackJsonp([2],{"4xXX":function(e,t){},QXW3:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("3cXf"),n=s.n(a),l={name:"HelloWorld",data:function(){return{percentage:0,id:null,socketStatus:0,message:"",chatList:[],numberList:[]}},sockets:{chatMessage:function(e){},message:function(e){var t=(e=JSON.parse(e)).token==localStorage.token;switch(e.type){case"chat":this.chatList.push({msg:e.msg,self:t,userName:t?"我":e.userName});break;case"getMessage":this.chatList=e.list}console.log("message",e)},percentage:function(e){this.percentage=JSON.parse(e).percentage},broadcast:function(e){console.log("broadcast",e)}},mounted:function(){console.log(this.$refs.sendMessage);var e=this;document.querySelector(".el-input__inner").addEventListener("keydown",function(t){13==t.keyCode&&e.send()}),this.$socket.send(n()({type:"getMessage",limit:20,currentPage:1,userName:localStorage.userName,passWord:localStorage.passWord,unit:localStorage.unit,token:localStorage.token}))},methods:{send:function(){if(""!=this.message){if(!localStorage.token)return this.$message({type:"warning",message:"请重新登陆"}),this.$router.push("/login");var e={type:"chat",userName:localStorage.userName,passWord:localStorage.passWord,unit:localStorage.unit,msg:this.message,token:localStorage.token};this.$socket.send(n()(e)),this.message=""}},setTime:function(){this.$socket.emit("percentage",n()({total:100}))}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{staticClass:"index"},[s("el-header",{staticClass:"header"},[s("el-table",{staticStyle:{width:"100%",height:"200px"},attrs:{data:e.numberList,"max-height":"250"}},[s("el-table-column",{attrs:{fixed:"",prop:"number",label:"手机号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"startPrice",label:"标准"}}),e._v(" "),s("el-table-column",{attrs:{prop:"maxPrice",label:"承诺费"}}),e._v(" "),s("el-table-column",{attrs:{prop:"unit",label:"单位"}}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),e.deleteRow(t.$index,e.numberList)}}},[e._v("移除")])]}}])})],1)],1),e._v(" "),s("el-main",{staticClass:"main"},[s("ul",e._l(e.chatList,function(t,a){return s("li",{key:a,class:{left:!t.self,right:t.self}},[s("span",[s("span",[e._v(e._s(t.userName)+":")]),e._v(" "),s("span",[e._v(e._s(t.msg))])])])}),0)]),e._v(" "),s("el-footer",{staticClass:"footer"},[s("el-input",{ref:"sendMessage",staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[s("el-button",{attrs:{slot:"append"},on:{click:e.send},slot:"append"},[e._v("发送")])],1)],1)],1)},staticRenderFns:[]};var r=s("C7Lr")(l,o,!1,function(e){s("4xXX")},"data-v-6fc58fb0",null);t.default=r.exports}});